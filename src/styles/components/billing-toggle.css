/**
 * Billing Toggle Component Styles
 * 
 * Pill-style toggle for switching between monthly and annual billing.
 * Inspired by WordPress pill navigation, adapted with DechBar design tokens.
 * 
 * Features:
 * - Animated gold slider
 * - Glassmorphism background
 * - Touch-friendly (48px min height)
 * - Responsive text (full → abbreviated on mobile)
 * - Spring animations
 * 
 * @package DechBar_App
 * @subpackage Styles/Components
 */

/* ===================================== */
/* BILLING TOGGLE CONTAINER */
/* ===================================== */

.billing-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-2);  /* 8px */
  margin: var(--spacing-8) 0;  /* 32px vertical spacing */
}

/* ===================================== */
/* TOGGLE TRACK (pill container) */
/* ===================================== */

.billing-toggle__track {
  position: relative;
  display: inline-flex;
  gap: var(--billing-toggle-gap);
  padding: var(--billing-toggle-padding);
  border-radius: var(--billing-toggle-radius);
  
  /* Glassmorphism */
  background: var(--glass-billing-toggle);
  border: 1px solid var(--glass-billing-toggle-border);
  backdrop-filter: blur(20px) saturate(150%);
  -webkit-backdrop-filter: blur(20px) saturate(150%);
  
  overflow: hidden;
  isolation: isolate;  /* Create stacking context for slider */
}

/* Mobile: Tighter spacing */
@media (max-width: 480px) {
  .billing-toggle__track {
    gap: 6px;
    padding: 5px;
  }
}

/* Narrow mobile: Even tighter */
@media (max-width: 390px) {
  .billing-toggle__track {
    gap: 6px;
    padding: 5px;
  }
}

/* ===================================== */
/* ANIMATED SLIDER (gold background) */
/* ===================================== */

.billing-toggle__slider {
  position: absolute;
  top: var(--billing-toggle-padding);
  left: 0;
  height: calc(100% - (var(--billing-toggle-padding) * 2));
  width: 0;  /* Set dynamically by JS */
  
  background: linear-gradient(180deg, #F0C76A, var(--color-accent));
  border-radius: var(--billing-toggle-radius);
  box-shadow: 0 4px 12px rgba(214, 162, 58, 0.3);
  
  transition: var(--billing-toggle-slider-transition);
  pointer-events: none;
  z-index: 0;
  transform: translate3d(0, 0, 0);  /* Force GPU acceleration */
}

/* ===================================== */
/* TOGGLE BUTTONS */
/* ===================================== */

.billing-toggle__button {
  position: relative;
  z-index: 1;
  
  /* Reset button styles */
  border: none;
  background: transparent;
  cursor: pointer;
  
  /* Styling */
  padding: var(--billing-toggle-button-padding);
  border-radius: var(--billing-toggle-radius);
  
  /* Typography */
  font-family: var(--font-base);
  font-size: var(--billing-toggle-font-size);
  font-weight: var(--font-weight-black);
  color: var(--color-text-primary);
  white-space: nowrap;
  letter-spacing: 0.02em;
  
  /* Transitions */
  transition: all 0.2s var(--spring-bounce);
  
  /* Accessibility */
  -webkit-tap-highlight-color: transparent;
  outline: none;
  transform: translateZ(0);  /* Force GPU acceleration */
}

/* Hover state */
.billing-toggle__button:hover {
  transform: translateY(-1px);
}

/* Focus state (keyboard navigation) */
.billing-toggle__button:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Active state */
.billing-toggle__button--active {
  color: var(--color-background);  /* Dark text on gold */
}

/* Disabled state */
.billing-toggle__button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  text-decoration: line-through;
}

.billing-toggle__button:disabled:hover {
  transform: none;
}

/* Mobile: Smaller padding and font */
@media (max-width: 480px) {
  .billing-toggle__button {
    padding: var(--billing-toggle-button-padding-mobile);
    font-size: var(--billing-toggle-font-size-mobile);
  }
}

/* Narrow mobile: Even smaller */
@media (max-width: 390px) {
  .billing-toggle__button {
    padding: var(--billing-toggle-button-padding-narrow);
    font-size: var(--billing-toggle-font-size-narrow);
    line-height: 1.3;
  }
}

/* ===================================== */
/* RESPONSIVE TEXT (full vs narrow) */
/* ===================================== */

/* Default: Show full text, hide narrow */
.billing-toggle__text-narrow {
  display: none;
}

.billing-toggle__text-full {
  display: inline;
}

/* Narrow mobile: Show abbreviated text */
@media (max-width: 390px) {
  .billing-toggle__text-narrow {
    display: inline;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .billing-toggle__text-full {
    display: none;
  }
}

/* ===================================== */
/* DISCOUNT BADGES IN BUTTONS */
/* ===================================== */

.billing-toggle__discount {
  display: inline-block;
  margin-left: 4px;
  font-size: 0.9em;
  opacity: 0.8;
}

/* Hide discount badges on narrow mobile */
@media (max-width: 390px) {
  .billing-toggle__discount {
    display: none;
  }
}

/* ===================================== */
/* ACCESSIBILITY */
/* ===================================== */

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .billing-toggle__slider {
    transition: none;
  }
  
  .billing-toggle__button {
    transition: none;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .billing-toggle__track {
    border: 2px solid var(--color-border);
  }
  
  .billing-toggle__button--active {
    background: var(--color-accent);
    color: var(--color-background);
  }
}

/* Reduced transparency */
@media (prefers-reduced-transparency: reduce) {
  .billing-toggle__track {
    background: var(--color-surface);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* ===================================== */
/* USAGE NOTES */
/* ===================================== */

/*
HTML Structure:
---------------
<div class="billing-toggle" role="group" aria-label="Frekvence platby">
  <div class="billing-toggle__track">
    <span class="billing-toggle__slider" aria-hidden="true"></span>
    <button 
      class="billing-toggle__button billing-toggle__button--active"
      type="button"
    >
      <span class="billing-toggle__text-full">Měsíčně</span>
      <span class="billing-toggle__text-narrow">Měsíc</span>
    </button>
    <button class="billing-toggle__button" type="button">
      <span class="billing-toggle__text-full">
        Ročně <span class="billing-toggle__discount">(-50 %)</span>
      </span>
      <span class="billing-toggle__text-narrow">Rok</span>
    </button>
  </div>
</div>

JavaScript (slider animation):
-----------------------------
const slider = document.querySelector('.billing-toggle__slider');
const buttons = document.querySelectorAll('.billing-toggle__button');

buttons.forEach((btn, index) => {
  btn.addEventListener('click', () => {
    const buttonWidth = btn.offsetWidth;
    const buttonLeft = btn.offsetLeft - track.offsetLeft;
    
    slider.style.width = `${buttonWidth}px`;
    slider.style.transform = `translateX(${buttonLeft}px)`;
    
    // Update active state
    buttons.forEach(b => b.classList.remove('billing-toggle__button--active'));
    btn.classList.add('billing-toggle__button--active');
  });
});
*/
