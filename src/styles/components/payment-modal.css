/**
 * Payment Modal - Apple Premium Style
 * 
 * Styling for Stripe Embedded Checkout modal with dark theme.
 * Stripe Elements automatically styled to match DechBar brand.
 * 
 * Visual Brand Book compliance:
 * - Dark-first (#121212 background, #2A2A2A surface)
 * - Teal primary (#2CBEC6) for focus/active states
 * - Gold accent (#F8CA00) for premium elements
 * - Glassmorphism (backdrop-filter: blur)
 * - Premium shadows (Apple-style depth)
 * 
 * @package DechBar_App
 * @subpackage Styles/Components
 */

/* Payment Modal Specific Styling */
.payment-modal {
  max-width: clamp(440px, 80vw, 1100px);
  max-height: 92vh;
  overflow-y: auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  padding: var(--spacing-5) var(--spacing-6);  /* 20px 32px */
}

/* Stripe Embedded Checkout Wrapper */
.payment-modal__stripe-wrapper {
  margin-top: 0;
  margin-bottom: var(--spacing-4);  /* 16px */
}

/* Stripe Elements - Dark Theme Configuration */
.payment-modal__stripe-wrapper iframe {
  /* Stripe iframe automatically inherits these CSS variables */
  --colorPrimary: #2CBEC6;  /* Teal - focus/active states */
  --colorBackground: #1E1E1E;  /* Dark surface */
  --colorText: #E0E0E0;  /* Off-white text */
  --colorDanger: #EF4444;  /* Red - errors */
  --borderRadius: 12px;
  --fontFamily: 'Inter', -apple-system, blinkmacsystemfont, sans-serif;
  
  /* Remove iframe border */
  border: none;
  width: 100%;
}

/* Security Badge */
.payment-modal__security {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);  /* 8px */
  margin-top: var(--spacing-4);  /* 16px */
  padding-top: var(--spacing-4);
  border-top: 1px solid var(--color-border);
  font-size: var(--font-size-sm);  /* 14px */
  color: var(--color-text-secondary);  /* #A0A0A0 */
}

.payment-modal__security svg {
  color: var(--color-success);  /* Green lock icon */
}

/* Mobile Responsive */
@media (width <= 768px) {
  .payment-modal {
    max-width: 100%;
    max-height: 96vh;
    padding: var(--spacing-4) var(--spacing-4);  /* 16px */
  }
}

/*
 * Scrolling fix pro PaymentModal na iOS/Android
 *
 * Problém: .modal-overlay má align-items: center + overflow: hidden (implicitní),
 * na iOS Safari scroll v child elementu nefunguje pokud overlay zachytí touch eventy.
 *
 * Řešení: Při otevřeném PaymentModal overlay přepne na scroll mode a karta
 * se zarovná nahoru — uživatel scrolluje overlay, ne kartu.
 */
.modal-overlay:has(.payment-modal) {
  align-items: flex-start;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: var(--spacing-4);
}

.modal-overlay:has(.payment-modal) .payment-modal {
  margin: auto;
  max-height: none;
  overflow-y: visible;
}

/* Loading State - Stripe takes 1-2s to load */
.payment-modal__stripe-wrapper:empty::before {
  content: 'Načítám platební formulář...';
  display: block;
  text-align: center;
  padding: var(--spacing-6) 0;
  color: var(--color-text-secondary);
  font-size: var(--font-size-sm);
}
